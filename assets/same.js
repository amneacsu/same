var r=[],e=11,o=12,c=48,f=2*Math.PI,u=0,i=0,a=document.getElementById("same"),d=a.getContext("2d");d.font="24px sans-serif";for(var l=["rgb(133, 199, 46)","rgb(255, 219, 0)","rgb(255, 0, 250)","rgb(57, 154, 250)","rgb(255, 0, 61)"],h=function(n){return function(t){return Object.keys(n).every(function(r){return t[r]===n[r]})}},x=function(n){return n},s=function(n){return n.filter(x)},v=function(n,t){return n.find(h(t))},y=function(n){return r.filter(h(n))},m=function(n){return~~(Math.random()*n)},g=function(n){return n.matched=!0},E=function(n){return n.matched=!1},p=function(n){return r.splice(r.indexOf(n),1)},b=function(n){return n.x+=1},w=function(n){return n.y+=1},L=function(n){return n.y<o&&!v(r,{x:n.x,y:n.y+1})},k=function(n){return y({x:n})},P=function(n){return y({y:n})},S=function(n,t){var r=m(l.length),e=!1;return{x:n,y:t,c:r,matched:e}},I=function H(n){g(n),M(n).forEach(H)},M=function(n){var t=y({c:n.c,matched:!1}),r=[v(t,{x:n.x,y:n.y+1}),v(t,{x:n.x,y:n.y-1}),v(t,{x:n.x+1,y:n.y}),v(t,{x:n.x-1,y:n.y})];return s(r)},O=1;o>=O;O++)for(var j=1;e>=j;j++)r.push(S(j,O));var q=function(n){for(;L(n);)w(n)},A=function(){for(var n=e;n>=2;n--)if(!k(n).length)for(var t=n-1;t>=1;t--)k(t).forEach(b)},B=function(){for(var n=o;n>=1;n--)P(n).forEach(q)},C=function(n){d.fillStyle=l[n.c];var t=(n.x-.5)*c,r=(n.y-.5)*c,e=n.matched?.25:.4;d.beginPath(),d.arc(t,r,c*e,0,f,!1),d.closePath(),d.fill()},F=function(){d.fillStyle="#453627",d.fillText("Score: "+u+(i>0?" + "+i:""),5,610)},R=function(){r.forEach(C),F()},T=function J(){X(),R(),window.requestAnimationFrame(J)},X=function(){d.clearRect(0,0,a.width,a.height)},Y=function(n){return{x:~~(n.offsetX/c)+1,y:~~(n.offsetY/c)+1}},z=function(n){return n.length*(n.length-1)},D=function(n){var t=y({matched:!0});t.length<2||(u+=i,t.forEach(p),B(),A())},G=function(n){r.forEach(E);var t=v(r,Y(n));t&&I(t);var e=y({matched:!0}),o=e.length;2>o||(i=z(e))};a.addEventListener("click",D),a.addEventListener("click",G),a.addEventListener("mousemove",G),window.addEventListener("load",T)